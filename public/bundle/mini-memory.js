!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=4)}([function(e,t,n){var r=n(5);e.exports="string"==typeof r?r:r.toString()},function(e,t,n){var r=n(6);e.exports="string"==typeof r?r:r.toString()},function(e,t,n){var r=n(8);e.exports="string"==typeof r?r:r.toString()},function(e,t,n){var r=n(9);e.exports="string"==typeof r?r:r.toString()},function(e,t,n){e.exports=n(10)},function(e,t){e.exports='<template id=\'MATRIX_DIMENSIONS_ERROR\'>\n<div class="code">\n\t<div class="pre">\n\t\t&lt;mini-memory matrix="2x2" lang="tr"></mini-memory>\n\t</div>\n\t<div class="pre">\n\t\t&lt;mini-memory matrix="16x16" lang="en"></mini-memory>\n\t</div>\n</div>\n</template>\n'},function(e,t,n){(e.exports=n(7)(!1)).push([e.i,":host * {\n  box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n:host {\n  --mini-memory-bg: #f9f9f9;\n  --mini-memory-border: #313131;\n  --mini-memory-disabled-button: rgba(240, 240, 240, 0.2);\n  --mini-memory-z-loading: 10;\n  --mini-memory-z-tile: 20;\n  --mini-memory-z-menu: 30;\n  font-family: Georgia, 'Times New Roman', Times, serif;\n  font-size: 12px;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background-color: var(--mini-memory-bg);\n  display: block;\n  left: 0;\n  top: 0;\n  overflow: hidden;\n  box-shadow: 0 0 4px 0 #333333;\n}\n:host([fullscreen]) {\n  position: fixed;\n  left: 0;\n  top: 0;\n  border: 0;\n  width: 100%;\n  height: 100%;\n}\n@media only screen and (orientation: landscape) {\n  :host([fullscreen]) {\n    border: 0;\n  }\n}\n\n:host #loading {\n  position: absolute;\n  left: 0;\n  top: 0;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n  text-transform: uppercase;\n  -webkit-animation: loading 1s infinite;\n          animation: loading 1s infinite;\n  z-index: var(--mini-memory-z-loading);\n}\n\n:host #loading.done {\n  display: none;\n}\n\n:host .code {\n  background-color: #333333;\n  color: yellowgreen;\n  display: block;\n  font-family: monospace, sans-serif;\n  padding: 6px;\n}\n\n:host .pre {\n  margin: 5px;\n}\n\n#tiles-container {\n  position: absolute;\n  top: 24px;\n  height: calc(100% - 24px);\n}\n\n:host .tile {\n  float: left;\n  z-index: var(--mini-memory-z-tile);\n  position: relative;\n  -webkit-perspective: 1000px;\n          perspective: 1000px;\n}\n\n:host .tile canvas {\n  width: calc(100% - 2px);\n  height: calc(100% - 2px);\n  position: relative;\n  border-radius: 2px;\n  cursor: pointer;\n  visibility: visible;\n  margin: 1px;\n  border: #a9a9a9 2px solid;\n  -webkit-transform-style: preserve-3d;\n          transform-style: preserve-3d;\n}\n:host .tile canvas:hover {\n  border-style: ridge;\n}\n:host .tile canvas.wait {\n  visibility: hidden;\n}\n\n:host .tile canvas.open {\n  border: 0;\n  -webkit-animation: cardOpen 300ms;\n          animation: cardOpen 300ms;\n  -webkit-animation-iteration-count: 1;\n          animation-iteration-count: 1;\n}\n\n@-webkit-keyframes loading {\n  0% {\n    opacity: 0;\n  }\n\n  50% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes loading {\n  0% {\n    opacity: 0;\n  }\n\n  50% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n}\n@-webkit-keyframes cardOpen {\n  0% {\n    opacity: 1;\n    -webkit-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n  }\n\n  20% {\n    opacity: 0;\n    -webkit-transform: rotateY(180deg);\n            transform: rotateY(180deg);\n  }\n\n  100% {\n    opacity: 1;\n    -webkit-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n  }\n}\n@keyframes cardOpen {\n  0% {\n    opacity: 1;\n    -webkit-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n  }\n\n  20% {\n    opacity: 0;\n    -webkit-transform: rotateY(180deg);\n            transform: rotateY(180deg);\n  }\n\n  100% {\n    opacity: 1;\n    -webkit-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n  }\n}\n",""])},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var o=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),i=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[n].concat(i).concat([o]).join("\n")}var a;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},o=0;o<this.length;o++){var i=this[o][0];null!=i&&(r[i]=!0)}for(o=0;o<e.length;o++){var a=e[o];null!=a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},function(e,t){e.exports='<style>\n  :host #toolbar {\n    position: absolute;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    left: 0;\n    top: 0;\n    height: 18px;\n    width: 100%;\n    padding: 0 2px;\n    font-size: 1.2em;\n    line-height: 1.2;\n  }\n  :host #counter {\n    width: 100px;\n  }\n  :host #player {\n    text-align: center;\n    max-width: 100px;\n    font-weight: bold;\n  }\n  :host #menu {\n    width: 20px;\n    height: 20px;\n    background: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAt0lEQVQ4je2UwQqCQBCGf1fXgtjCWhC0LhJ28tT7P0gdOoh2Wg8lQam7dugauysJHeqDuX38zMDMAN9hT19lxjEJnO9YS5sTANDWT4Q41DrfMwWqiVw4sl8BQD+9zQFoA60IwiQLwiT7OOiHYVHKWZRyG9e4NixKOVFNCQCK+HF9PgqdT+x6HJkhI/95z5DTM67NMt6ulexyAHC9blMVRanzjd+GPNyLpLICAOc+u9p0aYH9gx2dJ6RgKz0wt+R/AAAAAElFTkSuQmCC\');\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-size: 20px 16px;\n    cursor: pointer;\n    position: relative;\n  }\n</style>\n<div id="toolbar">\n  <div id="counter"></div>\n  <div id="player"></div>\n  <div id="menu"></div>\n</div>\n'},function(e,t){e.exports='<style>\n  :host label {\n    margin-bottom: 10px;\n    display: block;\n  }\n  :host input,\n  :host button,\n  :host select,\n  :host option {\n    outline: 0;\n    line-height: 1.5;\n    width: 100%;\n    -webkit-appearance: none;\n  }\n  :host input,\n  :host button,\n  :host select,\n  :host option {\n    border: 0;\n    display: block;\n    padding: 2px 4px;\n    border-radius: 5px;\n    box-shadow: 0 0 2px 0 #f1f1f1;\n    background-color: #313131;\n    color: white;\n    font-size: 1em;\n\n    text-align: center;\n    position: relative;\n  }\n  :host button:active {\n    box-shadow: 0 0 4px 0 white;\n  }\n\n  :host input:active {\n    background-color: rgba(255, 255, 255, 0.9);\n  }\n\n  :host button:hover:not(:disabled) {\n    box-shadow: 0 0 8px 0 white;\n    cursor: pointer;\n  }\n  :host button:disabled {\n    box-shadow: 0;\n    cursor: default;\n    background-color: var(--mini-memory-disabled-button);\n  }\n\n  :host #settings {\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(51, 51, 51, 0.95);\n    transform: translateX(100%);\n    z-index: var(--mini-memory-z-menu);\n    transition: transform 300ms;\n    color: white;\n    font-size: 1.66em;\n  }\n\n  :host #settings.show {\n    position: relative;\n    transform: translateX(0);\n  }\n\n  :host #settings .close-x {\n    float: right;\n    color: white;\n    top: 0;\n    padding-right: 4px;\n    font-size: 1.8em;\n    line-height: 1;\n    cursor: pointer;\n    transition: transform 300ms;\n  }\n\n  :host #settings .close-x:active {\n    transform: rotate(45deg);\n  }\n  :host .flex {\n    display: flex;\n    justify-content: space-evenly;\n  }\n  :host #form {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    justify-content: center;\n    align-items: center;\n    padding: 0 10px;\n    max-width: 320px;\n    margin: 0 auto;\n  }\n  :host #form > div {\n    width: 100%;\n    margin: 10px 0;\n  }\n  :host label[for=\'playerName\'] {\n    display: block;\n  }\n  :host #playerName,\n  :host #matrixcol,\n  :host #matrixrow {\n    display: inline-block;\n    background: none;\n    border: 0;\n    color: white;\n  }\n  :host #isFullScreen {\n    display: none;\n  }\n\n  :host #isFullScreen + .vCheck {\n    display: inline-block;\n    width: 40px;\n    height: 20px;\n    border-radius: 20px;\n    background-color: rgba(200, 0, 0, 0.5);\n    box-shadow: 0 0 4px 2px red;\n    border: #313131 1px solid;\n    position: relative;\n    transition: background-color 300ms;\n    cursor: pointer;\n  }\n  :host #isFullScreen:checked + .vCheck {\n    background-color: rgba(0, 250, 0, 0.5);\n    box-shadow: 0 0 4px 2px green;\n  }\n  :host #isFullScreen + .vCheck:after {\n    content: \'\';\n    display: inline-block;\n    position: relative;\n    left: 0;\n    top: 0;\n    width: 18px;\n    height: 18px;\n    background-color: #f1f1f1;\n    border-radius: 50%;\n    transform: translateX(120%);\n    transition: transform 300ms;\n  }\n  :host #isFullScreen:checked + .vCheck:after {\n    transform: translateX(0%);\n  }\n</style>\n<div id="settings">\n  <div><span class="close-x">&times;</span></div>\n  <div id="form">\n    <div>\n      <label for="playerName" data-i18n="PLAYERS_NAME"></label>\n      <input type="text" id="playerName" size="12" />\n    </div>\n    <div class="flex">\n      <div>\n        <label for="matrixcol" data-i18n="COLUMNS"></label>\n        <input\n          type="number"\n          placeholder="2"\n          id="matrixcol"\n          size="2"\n          min="2"\n          max="16"\n        />\n      </div>\n      <div>\n        <label for="matrixrow" data-i18n="ROWS"></label>\n        <input\n          type="number"\n          placeholder="2"\n          id="matrixrow"\n          size="2"\n          min="2"\n          max="16"\n        />\n      </div>\n    </div>\n\n    <div class="flex">\n      <label for="isFullScreen" data-i18n="FULL_SCREEN"></label>\n      <input type="checkbox" id="isFullScreen" />\n      <div class="vCheck"></div>\n    </div>\n    <div>\n      <select name="languageSelection" id="languageSelection">\n        <option value="default" data-i18n="SELECT_LANGUAGE"></option>\n        <option value="en" data-i18n="LANGUAGE_LABEL"></option>\n        <option value="de" data-i18n="LANGUAGE_LABEL"></option>\n        <option value="tr" data-i18n="LANGUAGE_LABEL"></option>\n      </select>\n    </div>\n    <div>\n      <button id="applySettings" data-i18n="APPLY" disabled="disabled"></button>\n    </div>\n    <div><button id="restartGame" data-i18n="RESTART"></button></div>\n  </div>\n</div>\n'},function(e,t,n){"use strict";n.r(t);var r={LANGUAGE_LABEL:{message:" English"},MATRIX_DIMENSIONS_ERROR:{message:"Memory puzzle matrix must be at least 2x2 and maximum 16x16\n    matrix dimension. For example:"},LOADING:{message:"Loading..."},ENTER_YOUR_NAME:{message:"Enter your name"},PLAYERS_NAME:{message:"Players name"},COLUMNS:{message:"Columns"},ROWS:{message:"Rows"},SELECT_LANGUAGE:{message:"Select your langauge"},FULL_SCREEN:{message:"Full screen"},APPLY:{message:"Apply"},RESTART:{message:"Restart"}},o={LANGUAGE_LABEL:{message:" Türkce"},MATRIX_DIMENSIONS_ERROR:{message:"Memory puzzle matrix en az 2x2,\n    en fazla 16x16 boyutlarinda olmalidir. Örnegin: "},LOADING:{message:"Yükleniyor..."},ENTER_YOUR_NAME:{message:"Isminizi girin"},PLAYERS_NAME:{message:"Oyuncu adi"},COLUMNS:{message:"Kolon"},ROWS:{message:"Sira"},SELECT_LANGUAGE:{message:"Dil secimi"},FULL_SCREEN:{message:"Tam ekran"},APPLY:{message:"Uygula"},RESTART:{message:"Yeni Oyun"}},i={LANGUAGE_LABEL:{message:" Deutsch"},MATRIX_DIMENSIONS_ERROR:{message:"Memory puzzle matrix mindestens 2x2,\n      oder maximal 16x16 Abmessungen haben. Wie zum Beispiel: "},LOADING:{message:"Wird geladen..."},ENTER_YOUR_NAME:{message:"Name eingeben"},PLAYERS_NAME:{message:"Spielername"},COLUMNS:{message:"Spalte"},ROWS:{message:"Reihe"},SELECT_LANGUAGE:{message:"Wähle deine Sprache"},FULL_SCREEN:{message:"Vollbildmodus"},APPLY:{message:"Anwenden"},RESTART:{message:"Neustart"}},a=n(0),s=n.n(a);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof t&&(t=navigator.language),this.all={en:r,de:i,tr:o},this.lang=t.slice(0,2).toLowerCase(),this.tmpl=window.document.createElement("div"),this.tmpl.innerHTML=s.a,this.lang){case"en":this.dict=r;break;case"tr":this.dict=o;break;case"de":this.dict=i;break;default:this.dict=r}}var t,n,a;return t=e,(n=[{key:"message",value:function(e){return this.dict[e].message}},{key:"sample",value:function(e){var t=this.tmpl.querySelector("#".concat(e));return window.document.importNode(t,!0).innerHTML}},{key:"update",value:function(e){var t=this,n=e.querySelectorAll("[data-i18n]"),r=this;[].forEach.call(n,function(e){switch(e.dataset.i18n){case"LANGUAGE_LABEL":e.innerText=t.all[e.value].LANGUAGE_LABEL.message,e.value===r.lang&&e.setAttribute("selected",!0);break;default:e.innerText=t.message(e.dataset.i18n)}})}}])&&c(t.prototype,n),a&&c(t,a),e}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){var t="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return h(e,arguments,y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)})(e)}function h(e,t,n){return(h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&m(o,n.prototype),o}).apply(null,arguments)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,y(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,d(Array)),n=t,(r=[{key:"random",value:function(){var e=this.length,t=Math.floor(Math.random()*e);return this.splice(t,1)[0]}}])&&f(n.prototype,r),o&&f(n,o),t}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){var t="function"==typeof Map?new Map:void 0;return(x=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return A(e,arguments,E(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),S(r,e)})(e)}function A(e,t,n){return(A=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&S(o,n.prototype),o}).apply(null,arguments)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),w(this,E(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,x(Array)),n=t,(r=[{key:"addCanvas",value:function(e){var t=this;e.forEach(function(e){e.width=parseInt(e.offsetWidth),e.height=parseInt(e.offsetHeight),t.push(e)})}},{key:"randomPair",value:function(e){var t=this.indexOf(e),n=[];n.push(this.splice(t,1)[0]);var r=this.length,o=Math.floor(Math.random()*r);return n.push(this.splice(o,1)[0]),n}}])&&v(n.prototype,r),o&&v(n,o),t}();function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _(e){var t="function"==typeof Map?new Map:void 0;return(_=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return N(e,arguments,C(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),T(r,e)})(e)}function N(e,t,n){return(N=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&T(o,n.prototype),o}).apply(null,arguments)}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,C(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,_(Array)),n=t,(r=[{key:"checkMark",value:function(e){var t=e.getContext("2d"),n=e.offsetWidth,r=e.offsetHeight;t.clearRect(0,0,n,r),t.globalAlpha=.25,t.drawImage(this.getImage(e),0,0,n,r),t.globalAlpha=1,t.save()}},{key:"hasPair",value:function(e){var t=!1;return this.forEach(function(n){n[0]===e&&(t=!0),n[1]===e&&(t=!0)}),t}},{key:"arePairs",value:function(e){var t=this,n=e[0],r=e[1],o=!1;return this.forEach(function(e){e[0]!==n&&e[1]!==n||e[0]!==r&&e[1]!==r||(o=!0,t.checkMark(n),t.checkMark(r))}),o}},{key:"getImage",value:function(e){var t;return this.forEach(function(n){n[0]!==e&&n[1]!==e||(t=n[2])}),t}}])&&O(n.prototype,r),o&&O(n,o),t}();function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cardBack=n,this.canvas=new k,this.images=new g,this.pairs=new M,this.canvas.addCanvas(t),this.state=[],this.prepared=!1,this.readyFunctions=[],this.winFunctions=[],this.cards={open:0,length:0}}var t,n,r;return t=e,(n=[{key:"onWin",value:function(e){this.winFunctions.push(e.bind(this))}},{key:"addImage",value:function(e){this.images.push(e),this.images.length===this.canvas.length/2&&this.prepare()}},{key:"prepare",value:function(){var e=this,t=this;t.cards.open=0,t.cards.length=t.images.length,this.canvas.forEach(function(n){n.addEventListener("click",function(n){if(0===e.counter.timer.diff&&e.counter.start(),!n.target.classList.contains("open")){if(!t.pairs.hasPair(n.target)){var r=t.canvas.randomPair(n.target);t.pairs.push(r.concat(t.images.random()))}switch(t.state.length){case 2:t.closeCard(t.state.pop()),t.closeCard(t.state.pop());case 0:t.state.push(n.target),t.openCard(n.target);break;case 1:t.state.push(n.target),t.openCard(n.target),t.pairs.arePairs(t.state)&&(t.state=[],t.cards.open++,t.cards.open===t.cards.length&&(t.counter.stop(),t.winFunctions.forEach(function(e){e()})))}}})}),this.prepared=!0,this.canvas.forEach(function(e){e.classList.remove("wait"),t.closeCard(e)}),this.readyFunctions.forEach(function(e){e.fn.call(e.context)})}},{key:"onReady",value:function(e,t){this.readyFunctions.push({fn:e,context:t})}},{key:"openCard",value:function(e){var t=this.pairs.getImage(e);t.constructor===HTMLImageElement?(e.classList.add("open"),this.drawImageOnCanvas(e,t)):console.warn("Translate-error: no image for the canvas found ")}},{key:"closeCard",value:function(e){this.drawImageOnCanvas(e,this.cardBack),e.classList.remove("open")}},{key:"drawImageOnCanvas",value:function(e,t){var n=e.getContext("2d");n.restore();var r={cw:e.width,ch:e.height,iw:t.width,ih:t.height};n.clearRect(0,0,r.cw,r.ch),n.drawImage(t,0,0,r.iw,r.ih,0,0,r.cw,r.ch)}}])&&P(t.prototype,n),r&&P(t,r),e}(),I=n(1),F=n.n(I);function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=Date.now();this.board=t,this.intervalHandle=0,this.timer={start:n,end:n,diff:0}}var t,n,r;return t=e,(n=[{key:"start",value:function(){var e=this,t=Date.now();this.timer.start=t,this.timer.end=t,this.timer.diff=0,this.intervalHandle=window.setInterval(function(){e.diff()},100)}},{key:"diff",value:function(){var e=Date.now();this.timer.end=e,this.timer.diff=this.timer.end-this.timer.start;var t=new Date(this.timer.diff).toISOString().slice(11,-1);this.board.innerHTML=t}},{key:"stop",value:function(){window.clearInterval(this.intervalHandle)}}])&&z(t.prototype,n),r&&z(t,r),e}(),D=n(2),U=n.n(D),Y=n(3),B=n.n(Y);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var H=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.players={},this.scores=[],this.playerTemplate={name:"",best:[{size:"2x2",best:"99:99:99.999"}],all:[]},this.currentPlayer=this.playerTemplate}var t,n,r;return t=e,(n=[{key:"addPlayer",value:function(e){Object.entries(this.players).forEach(function(e){e[1].name});var t={name:e,best:[{size:"2x2",best:"99:99:99.999"}]};this.players.push(t),this.currentPlayer=t}}])&&q(t.prototype,n),r&&q(t,r),e}();function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return!t||"object"!==W(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){var t="function"==typeof Map?new Map:void 0;return(J=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return K(e,arguments,$(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Z(r,e)})(e)}function K(e,t,n){return(K=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Z(o,n.prototype),o}).apply(null,arguments)}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=V(this,$(t).call(this))).i18n=new l,e.scores=new H,e.rendered=!1,e.images=[],e.tiles=[],e.toolbar=document.createElement("div"),e.layers={loading:null},e.cardBack=document.createElement("img"),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(t,J(HTMLElement)),n=t,o=[{key:"observedAttributes",get:function(){return["matrix","lang"]}}],(r=[{key:"reset",value:function(){this.rendered=!1,this.images=[],this.tiles=[],this.layers={loading:{}}}},{key:"getOddMidIndex",value:function(e){var t=X(e,2),n=t[0],r=t[1];return n*r%2==1?(n*r-1)/2:-1}},{key:"createTile",value:function(e){var t=document.createElement("div"),n=document.createElement("canvas");return n.getContext("2d").save(),t.classList.add("tile"),n.setAttribute("index",e),t.appendChild(n),{tile:t,canvas:n}}},{key:"connectedCallback",value:function(){this.rendered||this.render()}},{key:"disconnectedCallback",value:function(){}},{key:"adoptedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,t,n){"lang"===e&&(this.i18n=new l(n)),this.reset(),this.rendered=!1,this.render()}},{key:"limitsExceeded",value:function(e){var t=!1;return e.forEach(function(e){(e<2||e>16)&&(t=!0)}),t}},{key:"prepareMatrix",value:function(){var e=this,t=this.getAttribute("matrix").split("x");if(t[0]=parseInt(t[0]),t[1]=parseInt(t[1]),this.limitsExceeded(t))this.shadowRoot.innerHTML+="\n      ".concat(this.i18n.message("MATRIX_DIMENSIONS_ERROR"),"\n      ").concat(this.i18n.sample("MATRIX_DIMENSIONS_ERROR"),"\n      ");else{var n=this.getOddMidIndex(t),r="width:".concat(100/t[0],"%;"),o="height:".concat(100/t[1],"%;"),i=t[0]*t[1],a=i%2==0?i/2:(i-1)/2,s=this;this.shadowRoot.innerHTML+="<style>:host .tile {".concat(r+o,"}</style>");var c=0,l=0,u=0,f=document.createElement("div"),p=parseInt(this.parentNode.offsetWidth/t[0]),d=parseInt(this.parentNode.offsetHeight/t[1]);for(f.id="tiles-container",s.shadowRoot.appendChild(f),c=0;c<t[0];c++)for(l=0;l<t[1];l++){u=l+t[1]*c;var h=s.createTile(u);f.appendChild(h.tile),u!==n&&(h.canvas.classList.add("wait"),s.tiles.push(h))}var m,y,g=Math.floor(Math.random()*i)+50;this.cardBack.addEventListener("load",function(){for(var t=g;t<=g+a;t++)n={width:p,height:d},r=t,o=void 0,o=document.createElement("img"),s.images.push(o),o.src="//picsum.photos/".concat(n.width,"/").concat(n.height,"/?image=").concat(r),o.addEventListener("load",function(e){s.game.addImage(e.target)}),o.addEventListener("error",function(e){s.game.addImage(e.target)});var n,r,o;s.game=new j(e.tiles.map(function(e){return e.canvas}),e.cardBack),s.game.onReady(function(){e.shadowRoot.querySelector("#loading").classList.add("done"),s.game.counter=new G(s.shadowRoot.querySelector("#counter"))},s),s.game.onWin(function(){s.layers.settings.panel.classList.add("show")})}),this.cardBack.addEventListener("error",function(t){e.cardBack.setAttribute("src","data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=")}),this.cardBack.setAttribute("src",(m=d,y=796,"https://picsum.photos/".concat(p,"/").concat(m,"?image=").concat(y)))}}},{key:"render",value:function(){var e=this;if(!e.rendered){e.i18n=new l(e.getAttribute("lang")),e.rendered=!0,e.shadowRoot||e.attachShadow({mode:"open"}),e.shadowRoot.innerHTML="<style>".concat(F.a,"</style>\n    ").concat(U.a,"\n    ").concat(B.a,'\n    <div id="loading">').concat(e.i18n.message("LOADING"),"</div>"),e.prepareMatrix(),e.i18n.update(e.shadowRoot),e.layers.toolbar={counter:this.shadowRoot.querySelector("#counter"),player:this.shadowRoot.querySelector("#player"),menu:this.shadowRoot.querySelector("#menu")},e.layers.settings={panel:this.shadowRoot.querySelector("#settings"),closeX:this.shadowRoot.querySelector("#settings .close-x"),labels:{playername:e.shadowRoot.querySelector('label[for="playerName"]'),matrixcol:e.shadowRoot.querySelector('label[for="matrixcol"]'),matrixrow:e.shadowRoot.querySelector('label[for="matrixrow"]')},params:{languageSelection:e.shadowRoot.querySelector("#languageSelection"),playerName:e.shadowRoot.querySelector("#playerName"),matrixcol:e.shadowRoot.querySelector("#matrixcol"),matrixrow:e.shadowRoot.querySelector("#matrixrow"),isFullScreen:e.shadowRoot.querySelector("#isFullScreen")},vCheckFullScreen:e.shadowRoot.querySelector("#isFullScreen + .vCheck"),applySettings:e.shadowRoot.querySelector("#applySettings"),restartGame:e.shadowRoot.querySelector("#restartGame")},n(),e.layers.toolbar.menu.addEventListener("click",function(t){n(),e.layers.settings.panel.classList.add("show"),e.layers.settings.params.playerName.focus()}),e.layers.settings.closeX.addEventListener("click",function(t){e.layers.settings.panel.classList.remove("show")}),e.layers.settings.params.languageSelection.addEventListener("change",function(t){e.i18n=new l(t.target.value),e.i18n.update(e.shadowRoot)}),e.layers.settings.vCheckFullScreen.addEventListener("click",function(n){var r=e.layers.settings.params.isFullScreen;r.checked=!r.checked,t()}),e.layers.settings.applySettings.addEventListener("click",function(t){var n=e.layers.settings.params.matrixcol.value,r=e.layers.settings.params.matrixrow.value,o=e.layers.settings.params.isFullScreen.checked;e.scores.currentPlayer.name=e.layers.settings.params.playerName.value,e.layers.toolbar.player.innerText=e.scores.currentPlayer.name,e.setAttribute("matrix","".concat(n,"x").concat(r)),o?e.setAttribute("fullscreen",""):e.removeAttribute("fullscreen"),e.layers.settings.panel.classList.remove("show")}),e.layers.settings.restartGame.addEventListener("click",function(t){e.layers.settings.panel.classList.remove("show"),e.reset(),e.render(),n()});var t=function(t){e.layers.settings.applySettings.removeAttribute("disabled")};Object.entries(e.layers.settings.params).forEach(function(e){var n=[];"text"===e[1].type?n.push("blur","keyup"):n.push("change"),n.forEach(function(n){e[1].addEventListener(n,t)})})}function n(){e.layers.settings.params.matrixcol.value=e.getAttribute("matrix").split("x")[0],e.layers.settings.params.matrixrow.value=e.getAttribute("matrix").split("x")[1],e.layers.toolbar.player.innerText=e.scores.currentPlayer.name,e.layers.settings.params.playerName.value=e.scores.currentPlayer.name,e.layers.settings.params.isFullScreen.checked=e.hasAttribute("fullscreen"),e.layers.settings.applySettings.setAttribute("disabled","disabled"),e.offsetWidth<400&&(document.querySelector("mini-memory").shadowRoot.host.style.fontSize="6px")}}}])&&Q(n.prototype,r),o&&Q(n,o),t}();customElements.define("mini-memory",ee)}]);