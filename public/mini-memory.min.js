!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=5)}([function(e,n,t){var r=t(7);e.exports="string"==typeof r?r:r.toString()},function(e,n,t){var r=t(6);e.exports="string"==typeof r?r:r.toString()},function(e,n,t){var r=t(9);e.exports="string"==typeof r?r:r.toString()},function(e,n,t){var r=t(10);e.exports="string"==typeof r?r:r.toString()},function(e,n,t){var r=t(11);e.exports="string"==typeof r?r:r.toString()},function(e,n,t){e.exports=t(12)},function(e,n){e.exports='<template id=\'MATRIX_DIMENSIONS_ERROR\'>\n<div class="code">\n\t<div class="pre">\n\t\t&lt;mini-memory matrix="2x2" lang="tr"></mini-memory>\n\t</div>\n\t<div class="pre">\n\t\t&lt;mini-memory matrix="10x10" lang="en"></mini-memory>\n\t</div>\n</div>\n</template>\n'},function(e,n,t){(e.exports=t(8)(!1)).push([e.i,"html {\n\n}\n:host *,\nmini-memory * {\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n}\n:host {\n  --mini-memory-bg: #f9f9f9;\n  --mini-memory-border: #313131;\n  --mini-memory-disabled-button: rgba(240, 240, 240, 0.2);\n  --mini-memory-z-loading: 10;\n  --mini-memory-z-tile: 20;\n  --mini-memory-z-menu: 30;\n  --mini-memory-z-nextlevel: 0;\n  --mini-memory-z-active: 1000;\n  font-family: Georgia, 'Times New Roman', Times, serif;\n  font-size: 12px;\n  position: relative;\n  width: 100%;\n  height: 100%;\n  background-color: var(--mini-memory-bg);\n  display: block;\n  left: 0;\n  top: 0;\n  overflow: hidden;\n  -webkit-box-shadow: 0 0 4px 0 #333333;\n          box-shadow: 0 0 4px 0 #333333;\n  width: 100%;\n  height: 100%;\n}\n:host([view='fullscreen']) {\n  position: fixed;\n  left: 0;\n  top: 0;\n  border: 0;\n  width: 100%;\n  height: 100%;\n}\n@media only screen and (orientation: landscape) {\n  :host([view='fullscreen']) {\n    border: 0;\n  }\n}\n\n:host #loading {\n  position: absolute;\n  left: 0;\n  top: 0;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-orient: vertical;\n  -webkit-box-direction: normal;\n      -ms-flex-direction: column;\n          flex-direction: column;\n  width: 100%;\n  height: 100%;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  text-transform: uppercase;\n  -webkit-animation: loading 1s infinite;\n          animation: loading 1s infinite;\n  z-index: var(--mini-memory-z-loading);\n}\n\n:host #loading .lastScore {\n  font-weight: bold;\n  font-size: 10vw;\n}\n\n:host #loading.done {\n  display: none;\n}\n\n:host .code {\n  background-color: #333333;\n  color: yellowgreen;\n  display: block;\n  font-family: monospace, sans-serif;\n  padding: 6px;\n}\n\n:host .pre {\n  margin: 5px;\n}\n\n#tiles-container {\n  position: absolute;\n  top: 24px;\n  height: calc(100% - 24px);\n  width: 100%;\n}\n\n:host .tile {\n  float: left;\n  z-index: var(--mini-memory-z-tile);\n  position: relative;\n  -webkit-perspective: 1000px;\n          perspective: 1000px;\n}\n\n:host .tile canvas {\n  width: calc(100% - 2px);\n  height: calc(100% - 2px);\n  position: relative;\n  border-radius: 2.5%;\n  cursor: pointer;\n  visibility: visible;\n  margin: 1px;\n  -webkit-transform-style: preserve-3d;\n          transform-style: preserve-3d;\n  -webkit-transition: -webkit-transform 100ms;\n  transition: -webkit-transform 100ms;\n  transition: transform 100ms;\n  transition: transform 100ms, -webkit-transform 100ms;\n}\n:host .tile canvas:hover:not(.open) {\n  -webkit-transform: scale(0.99);\n          transform: scale(0.99);\n}\n:host .tile canvas.wait {\n  visibility: hidden;\n  -webkit-transform: rotateY(180deg);\n          transform: rotateY(180deg);\n}\n\n:host .tile canvas.open {\n  border: 0;\n  -webkit-animation: cardOpen 300ms;\n          animation: cardOpen 300ms;\n  -webkit-animation-iteration-count: 1;\n          animation-iteration-count: 1;\n}\n\n@-webkit-keyframes loading {\n  0% {\n    opacity: 0;\n  }\n\n  50% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes loading {\n  0% {\n    opacity: 0;\n  }\n\n  50% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n}\n@-webkit-keyframes cardOpen {\n  0% {\n    opacity: 1;\n    -webkit-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n  }\n\n  20% {\n    opacity: 0;\n    -webkit-transform: rotateY(180deg);\n            transform: rotateY(180deg);\n  }\n\n  100% {\n    opacity: 1;\n    -webkit-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n  }\n}\n@keyframes cardOpen {\n  0% {\n    opacity: 1;\n    -webkit-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n  }\n\n  20% {\n    opacity: 0;\n    -webkit-transform: rotateY(180deg);\n            transform: rotateY(180deg);\n  }\n\n  100% {\n    opacity: 1;\n    -webkit-transform: rotateY(0deg);\n            transform: rotateY(0deg);\n  }\n}\n",""])},function(e,n,t){"use strict";e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t=function(e,n){var t=e[1]||"",r=e[3];if(!r)return t;if(n&&"function"==typeof btoa){var i=(a=r,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),o=r.sources.map(function(e){return"/*# sourceURL="+r.sourceRoot+e+" */"});return[t].concat(o).concat([i]).join("\n")}var a;return[t].join("\n")}(n,e);return n[2]?"@media "+n[2]+"{"+t+"}":t}).join("")},n.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];null!=a[0]&&r[a[0]]||(t&&!a[2]?a[2]=t:t&&(a[2]="("+a[2]+") and ("+t+")"),n.push(a))}},n}},function(e,n){e.exports='<style>\n  :host #toolbar {\n    position: absolute;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    left: 0;\n    top: 0;\n    height: 18px;\n    width: 100%;\n    padding: 0 2px;\n    font-size: 1em;\n    line-height: 1.2;\n  }\n  :host #counter {\n    width: 100px;\n  }\n  :host #player {\n    text-align: center;\n    max-width: 100px;\n    font-weight: bold;\n    \n  }\n  :host #menu {\n    width: 20px;\n    height: 20px;\n    background: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAt0lEQVQ4je2UwQqCQBCGf1fXgtjCWhC0LhJ28tT7P0gdOoh2Wg8lQam7dugauysJHeqDuX38zMDMAN9hT19lxjEJnO9YS5sTANDWT4Q41DrfMwWqiVw4sl8BQD+9zQFoA60IwiQLwiT7OOiHYVHKWZRyG9e4NixKOVFNCQCK+HF9PgqdT+x6HJkhI/95z5DTM67NMt6ulexyAHC9blMVRanzjd+GPNyLpLICAOc+u9p0aYH9gx2dJ6RgKz0wt+R/AAAAAElFTkSuQmCC\');\n    background-repeat: no-repeat;\n    background-position: center center;\n    background-size: 20px 16px;\n    cursor: pointer;\n    position: relative;\n  }\n  :host #menu.hide {\n    display: none !important;\n  }\n</style>\n<div id="toolbar">\n  <div id="counter"></div>\n  <div id="player"></div>\n  <div id="menu"></div>\n</div>\n'},function(e,n){e.exports='<style>\n  :host label {\n    margin-bottom: 10px;\n    display: block;\n  }\n  :host input,\n  :host button,\n  :host select,\n  :host option {\n    outline: 0;\n    line-height: 1.5;\n    width: 100%;\n    -moz-appearance: none;\n    -webkit-appearance: none;\n    appearance: none;\n  }\n  :host input,\n  :host button,\n  :host select,\n  :host option {\n    border: 0;\n    display: block;\n    padding: 2px 4px;\n    border-radius: 5px;\n    box-shadow: 0 0 2px 0 #f1f1f1;\n    background-color: #313131;\n    color: white;\n    font-size: 0.75em;\n    text-align: center;\n    position: relative;\n\n  }\n  :host button:active {\n    box-shadow: 0 0 4px 0 white;\n  }\n  :host #playerName {\n    transition: background-color 300mx;\n  }\n  :host #playerName.error {\n    background-color: rgba(200, 0, 0, 0.5);\n  }\n\n  :host input:active {\n    background-color: rgba(255, 255, 255, 0.9);\n  }\n\n  :host button:hover:not(:disabled) {\n    box-shadow: 0 0 8px 0 white;\n    cursor: pointer;\n  }\n  :host button:disabled {\n    box-shadow: 0;\n    cursor: default;\n    background-color: var(--mini-memory-disabled-button);\n  }\n\n  :host #settings {\n    display: block;\n    flex-direction: column;\n    position: relative;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(51, 51, 51, 0.95);\n    transform: translateX(100%);\n    z-index: var(--mini-memory-z-menu);\n    transition: transform 300ms;\n    color: white;\n    font-size: 1em;\n  }\n\n  :host #settings.show {\n    position: relative;\n    transform: translateX(0);\n  }\n\n  :host #settings .close-x {\n    float: right;\n    color: white;\n    top: 0;\n    padding-right: 4px;\n    font-size: 1.75em;\n    line-height: 1;\n    cursor: pointer;\n    transition: transform 300ms;\n  }\n\n  :host #settings .close-x:active {\n    transform: rotate(45deg);\n  }\n  :host .flex {\n    display: flex;\n    justify-content: space-evenly;\n  }\n  :host #form {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%;\n    justify-content: center;\n    align-items: center;\n    padding: 0 10px;\n    max-width: 320px;\n    margin: 0 auto;\n  }\n  :host #form > div {\n    width: 100%;\n    margin: 10px 0;\n  }\n  :host label[for=\'playerName\'] {\n    display: block;\n  }\n  :host #playerName,\n  :host #matrixcol,\n  :host #matrixrow {\n    display: inline-block;\n    background: none;\n    border: 0;\n    color: white;\n  }\n\n  :host #isFullScreen {\n    display: none;\n  }\n\n  :host #isFullScreen + .vCheck {\n    display: inline-block;\n    width: 60px;\n    height: 20px;\n    border-radius: 20px;\n    background-color: rgba(200, 0, 0, 0.5);\n    box-shadow: 0 0 4px 2px red;\n    border: #313131 1px solid;\n    position: relative;\n    transition: background-color 300ms;\n    cursor: pointer;\n  }\n  :host #isFullScreen:checked + .vCheck {\n    background-color: rgba(0, 250, 0, 0.5);\n    box-shadow: 0 0 4px 2px green;\n  }\n  :host #isFullScreen + .vCheck::before {\n    content: \'OFF\';\n    position: absolute;\n    opacity: 0.5;\n    left: 6px;\n    top: 2px;\n  }\n\n  :host #isFullScreen:checked + .vCheck::before {\n    content: \'ON\';\n    left: unset;\n    right: 6px;\n    opacity: 1;\n  }\n  :host #isFullScreen + .vCheck:after {\n    content: \'\';\n    display: inline-block;\n    position: relative;\n    left: 100%;\n    top: 0;\n    width: 18px;\n    height: 18px;\n    background-color: #f1f1f1;\n    border-radius: 50%;\n    transform: translateX(-100%);\n    transition: all 300ms;\n  }\n  :host #isFullScreen:checked + .vCheck:after {\n    left: 0;\n    transform: translateX(0%);\n  }\n</style>\n<div id="settings">\n  <div><span class="close-x">&times;</span></div>\n  <div id="form">\n    <div>\n      <label for="playerName" data-i18n="PLAYERS_NAME"></label>\n      <input type="text" id="playerName" size="12" />\n    </div>\n    <div class="flex">\n      <div>\n        <label for="matrixcol" data-i18n="COLUMNS"></label>\n        <input\n          type="number"\n          placeholder="2"\n          id="matrixcol"\n          size="2"\n          min="2"\n          max="10"\n        />\n      </div>\n      <div>\n        <label for="matrixrow" data-i18n="ROWS"></label>\n        <input\n          type="number"\n          placeholder="2"\n          id="matrixrow"\n          size="2"\n          min="2"\n          max="10"\n        />\n      </div>\n    </div>\n    <div class="flex">\n      <label for="isFullScreen" data-i18n="FULL_SCREEN"></label>\n      <input type="checkbox" id="isFullScreen" />\n      <div class="vCheck"></div>\n    </div>\n    <div>\n      <select name="languageSelection" id="languageSelection">\n        <option value="default" data-i18n="SELECT_LANGUAGE"></option>\n        <option value="en" data-i18n="LANGUAGE_LABEL"></option>\n        <option value="de" data-i18n="LANGUAGE_LABEL"></option>\n        <option value="tr" data-i18n="LANGUAGE_LABEL"></option>\n      </select>\n    </div>\n    <div>\n      <button id="applySettings" data-i18n="APPLY" disabled="disabled"></button>\n    </div>\n    <div><button id="restartGame" data-i18n="RESTART"></button></div>\n  </div>\n</div>\n'},function(e,n){e.exports='<style>\n  :host #nextlevel {\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.9);\n    color: white;\n    display: none;\n    transition: all 300ms;\n    opacity: 0;\n  }\n\n  :host #nextlevel.active {\n    z-index: var(--mini-memory-z-active);\n    display: block;\n    opacity: 1;\n  }\n  :host #nextlevel #summary {\n    text-align: center;\n    font-size: 3vw;\n  }\n  :host #nextlevel .content {\n    display: block;\n    position: relative;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -50%);\n  }\n  :host #nextlevel .content p {\n    line-height: 10px;\n  }\n\n  :host button#continue {\n    display: block;\n    font-size: 5vw;\n    width: unset;\n    margin: 0 auto;\n    padding: 2% 5%;\n    border-radius: 2vw;\n  }\n</style>\n<div id="nextlevel" class="active">\n  <div class="content">\n    <div id="summary"></div>\n    <button id="continue">PLAY</button>\n  </div>\n</div>\n'},function(e,n,t){"use strict";t.r(n);var r={LANGUAGE_LABEL:{message:" English"},MATRIX_DIMENSIONS_ERROR:{message:"Memory puzzle matrix must be at least 2x2 and maximum 10x10\n    matrix dimension. For example:"},LOADING:{message:"Loading..."},ENTER_YOUR_NAME:{message:"Enter your name"},PLAYERS_NAME:{message:"Players name"},COLUMNS:{message:"Columns"},ROWS:{message:"Rows"},SELECT_LANGUAGE:{message:"Select your langauge"},FULL_SCREEN:{message:"Full screen"},APPLY:{message:"Apply"},RESTART:{message:"Restart"}},i={LANGUAGE_LABEL:{message:" Türkce"},MATRIX_DIMENSIONS_ERROR:{message:"Memory puzzle matrix en az 2x2,\n    en fazla 10x10 boyutlarinda olmalidir. Örnegin: "},LOADING:{message:"Yükleniyor..."},ENTER_YOUR_NAME:{message:"Isminizi girin"},PLAYERS_NAME:{message:"Oyuncu adi"},COLUMNS:{message:"Kolon"},ROWS:{message:"Sira"},SELECT_LANGUAGE:{message:"Dil secimi"},FULL_SCREEN:{message:"Tam ekran"},APPLY:{message:"Uygula"},RESTART:{message:"Yeni Oyun"}},o={LANGUAGE_LABEL:{message:" Deutsch"},MATRIX_DIMENSIONS_ERROR:{message:"Memory puzzle matrix mindestens 2x2,\n      oder maximal 10x10 Abmessungen haben. Wie zum Beispiel: "},LOADING:{message:"Wird geladen..."},ENTER_YOUR_NAME:{message:"Name eingeben"},PLAYERS_NAME:{message:"Spielername"},COLUMNS:{message:"Spalte"},ROWS:{message:"Reihe"},SELECT_LANGUAGE:{message:"Wähle deine Sprache"},FULL_SCREEN:{message:"Vollbildmodus"},APPLY:{message:"Anwenden"},RESTART:{message:"Neustart"}},a=t(1),s=t.n(a);function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";switch(function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof n&&(n=navigator.language),this.all={en:r,de:o,tr:i},this.lang=n.slice(0,2).toLowerCase(),this.tmpl=window.document.createElement("div"),this.tmpl.innerHTML=s.a,this.lang){case"en":this.dict=r;break;case"tr":this.dict=i;break;case"de":this.dict=o;break;default:this.dict=r}}var n,t,a;return n=e,(t=[{key:"message",value:function(e){return this.dict[e].message}},{key:"sample",value:function(e){var n=this.tmpl.querySelector("#".concat(e));return window.document.importNode(n,!0).innerHTML}},{key:"update",value:function(e){var n=this,t=e.querySelectorAll("[data-i18n]"),r=this;[].forEach.call(t,function(e){switch(e.dataset.i18n){case"LANGUAGE_LABEL":e.innerText=n.all[e.value].LANGUAGE_LABEL.message,e.value===r.lang&&e.setAttribute("selected",!0);break;default:e.innerText=n.message(e.dataset.i18n)}})}}])&&c(n.prototype,t),a&&c(n,a),e}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,n){return!n||"object"!==u(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function p(e){var n="function"==typeof Map?new Map:void 0;return(p=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return h(e,arguments,y(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)})(e)}function h(e,n,t){return(h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,n,t){var r=[null];r.push.apply(r,n);var i=new(Function.bind.apply(e,r));return t&&m(i,t.prototype),i}).apply(null,arguments)}function m(e,n){return(m=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),d(this,y(n).apply(this,arguments))}var t,r,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&m(e,n)}(n,p(Array)),t=n,(r=[{key:"random",value:function(){var e=this.length,n=Math.floor(Math.random()*e);return this.splice(n,1)[0]}}])&&f(t.prototype,r),i&&f(t,i),n}();function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,n){return!n||"object"!==g(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function x(e){var n="function"==typeof Map?new Map:void 0;return(x=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return k(e,arguments,E(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),S(r,e)})(e)}function k(e,n,t){return(k=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,n,t){var r=[null];r.push.apply(r,n);var i=new(Function.bind.apply(e,r));return t&&S(i,t.prototype),i}).apply(null,arguments)}function S(e,n){return(S=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),w(this,E(n).apply(this,arguments))}var t,r,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&S(e,n)}(n,x(Array)),t=n,(r=[{key:"addCanvas",value:function(e){var n=this;e.forEach(function(e){e.width=parseInt(e.offsetWidth),e.height=parseInt(e.offsetHeight),n.push(e)})}},{key:"randomPair",value:function(e){var n=this.indexOf(e),t=[];t.push(this.splice(n,1)[0]);var r=this.length,i=Math.floor(Math.random()*r);return t.push(this.splice(i,1)[0]),t}}])&&b(t.prototype,r),i&&b(t,i),n}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,n){return!n||"object"!==O(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function C(e){var n="function"==typeof Map?new Map:void 0;return(C=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return N(e,arguments,_(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),T(r,e)})(e)}function N(e,n,t){return(N=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,n,t){var r=[null];r.push.apply(r,n);var i=new(Function.bind.apply(e,r));return t&&T(i,t.prototype),i}).apply(null,arguments)}function T(e,n){return(T=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),R(this,_(n).apply(this,arguments))}var t,r,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&T(e,n)}(n,C(Array)),t=n,(r=[{key:"checkMark",value:function(e){var n=e.getContext("2d"),t=e.offsetWidth,r=e.offsetHeight,i=this.getImage(e);n.clearRect(0,0,t,r),n.globalAlpha=.25,n.drawImage(i,0,0,parseInt(i.width),parseInt(i.height),0,0,t,r),n.globalAlpha=1,n.save()}},{key:"hasPair",value:function(e){var n=!1;return this.forEach(function(t){t[0]===e&&(n=!0),t[1]===e&&(n=!0)}),n}},{key:"arePairs",value:function(e){var n=this,t=e[0],r=e[1],i=!1;return this.forEach(function(e){e[0]!==t&&e[1]!==t||e[0]!==r&&e[1]!==r||(i=!0,n.checkMark(t),n.checkMark(r))}),i}},{key:"getImage",value:function(e){var n;return this.forEach(function(t){t[0]!==e&&t[1]!==e||(n=t[2])}),n}}])&&L(t.prototype,r),i&&L(t,i),n}();function P(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.intervalHandle=0,this.strDiff="";var n=Date.now();this.timer={start:n,end:n,diff:0}}var n,t,r;return n=e,(t=[{key:"reset",value:function(e){var n=Date.now();this.timer={start:n,end:n,diff:0},this.board=e}},{key:"start",value:function(){var e=this,n=Date.now();this.timer.start=n,this.timer.end=n,this.timer.diff=0,this.intervalHandle=window.setInterval(function(){e.diff()},100)}},{key:"diff",value:function(){var e=Date.now();this.timer.end=e,this.timer.diff=this.timer.end-this.timer.start,this.strDiff=new Date(this.timer.diff).toISOString().slice(11,-5),this.board.innerHTML=this.strDiff}},{key:"stop",value:function(){window.clearInterval(this.intervalHandle)}}])&&P(n.prototype,t),r&&P(n,r),e}();function I(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function F(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var z=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=document.createElement("div"),this.cardBack=t,this.canvas=new A,this.images=new v,this.pairs=new M,this.canvas.addCanvas(n),this.state=[],this.counter=new j,this.prepared=!1,this.cards={open:0,length:0}}var n,t,r;return n=e,(t=[{key:"addImage",value:function(e){this.images.push(e),this.images.length===this.canvas.length/2&&this.prepare()}},{key:"prepare",value:function(){var e=this,n=this;n.cards.open=0,n.cards.length=n.images.length,this.canvas.forEach(function(t){t.addEventListener("click",function(t){if(0===e.counter.timer.diff&&e.counter.start(),!t.target.classList.contains("open")){if(!n.pairs.hasPair(t.target)){var r=n.canvas.randomPair(t.target);n.pairs.push(r.concat(n.images.random()))}switch(n.state.length){case 2:n.closeCard(n.state.pop()),n.closeCard(n.state.pop());case 0:n.state.push(t.target),n.openCard(t.target);break;case 1:if(n.state.push(t.target),n.openCard(t.target),n.pairs.arePairs(n.state)&&(n.state=[],n.cards.open++,n.cards.open===n.cards.length)){n.counter.stop();var i=new CustomEvent("win",{});n.events.dispatchEvent(i)}}}})}),n.prepared=!0;var t=1e3/n.canvas.length;n.canvas.forEach(function(e,r){setTimeout(function(){e.classList.remove("wait"),n.closeCard(e)},r*t)});var r=new CustomEvent("ready",{});n.events.dispatchEvent(r)}},{key:"openCard",value:function(e){var n=this.pairs.getImage(e);n.constructor===HTMLImageElement?(e.classList.add("open"),this.drawImageOnCanvas(e,n)):console.warn("Translate-error: no image for the canvas found ")}},{key:"closeCard",value:function(e){this.drawImageOnCanvas(e,this.cardBack),e.classList.remove("open")}},{key:"drawImageOnCanvas",value:function(e,n){var t=e.getContext("2d");t.restore();var r={cw:e.width,ch:e.height,iw:n.width,ih:n.height};t.clearRect(0,0,r.cw,r.ch),t.drawImage(n,0,0,r.iw,r.ih,0,0,r.cw,r.ch)}},{key:"nextLevel",value:function(e){var n,t;self=this;var r=I(e.matrix.split("x").map(function(e){return parseInt(e)}),2);return(n=r[0])===(t=r[1])?n++:t++,n>10||t>10?"2x2":"".concat(n,"x").concat(t)}}])&&F(n.prototype,t),r&&F(n,r),e}();function G(e,n,t){var r=document.createElement("img");return r.addEventListener("load",n),r.addEventListener("error",t,!1),e&&(r.src=e),r}function D(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.owner=n,this.width=t.width,this.height=t.height,this.imageCount=t.imageCount,this.excludedImages=[],this.init()}var n,t,r;return n=e,(t=[{key:"init",value:function(){var e=this;function n(n){e.owner.game.addImage(n.target)}function t(n){n.target.src=e.picsum(e.width,e.height)}e.owner.cardBack.addEventListener("load",function(){for(var r=0;r<=e.imageCount;r++){var i=G(e.picsum(e.width,e.height),n,t);e.owner.images.push(i)}}),e.owner.cardBack.addEventListener("error",function(n){n.target.src=e.picsum(e.width,e.height)}),e.owner.cardBack.src=e.picsum(e.width,e.height)}},{key:"picsum",value:function(e,n){return"https://picsum.photos/".concat(e,"/").concat(n,"?image=").concat(this.getFreeId())}},{key:"getFreeId",value:function(){for(var e=Math.floor(1e3*Math.random());this.excludedImages.filter(function(n){return n===e}).length>0;)e=Math.floor(1e3*Math.random());return this.excludedImages.push(e),e}}])&&D(n.prototype,t),r&&D(n,r),e}(),Y=t(0),U=t.n(Y);var B=t(2),H=t.n(B),W=t(3),X=t.n(W);function Q(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=n,this.scores={},this.lastGame=""}var n,t,r;return n=e,(t=[{key:"addScore",value:function(e,n){this.lastGame="".concat(n.strDiff),e="_".concat(e),this.scores[e]=this.scores[e]||[],this.scores[e].push(n),this.scores[e].sort(function(e,n){return e.timer.diff-n.timer.diff})}},{key:"table",value:function(){var e=this,n="<table>";return Object.keys(this.scores).forEach(function(t){var r=e.scores[t];n+="<tr><td>".concat(r.slice(1),"</td><td>&nbsp;</td></tr>"),r.forEach(function(e){n+="<tr><td>&nbsp;</td><td>".concat(e.strDiff,"</td></tr>")})}),n+"</table>"}}])&&Q(n.prototype,t),r&&Q(n,r),e}();function J(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var K=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.players={},this.currentPlayer=new V("Player 1")}var n,t,r;return n=e,(t=[{key:"addPlayer",value:function(e){var n=this;Object.keys(n.players).forEach(function(e){n.player[e].name});var t=new V(e);n.players.push(t),n.currentPlayer=t}}])&&J(n.prototype,t),r&&J(n,r),e}();function Z(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var n=window.document,t=n.documentElement;this.doc=n,this.docEl=t,this.requestFullScreen=t.requestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullScreen||t.msRequestFullscreen,this.cancelFullScreen=n.exitFullscreen||n.mozCancelFullScreen||n.webkitExitFullscreen||n.msExitFullscreen}var n,t,r;return n=e,(t=[{key:"enter",value:function(){this.doc.fullscreenElement||this.doc.mozFullScreenElement||this.doc.webkitFullscreenElement||this.doc.msFullscreenElement||this.requestFullScreen.call(this.docEl)}},{key:"exit",value:function(){(this.doc.fullscreenElement||this.doc.mozFullScreenElement||this.doc.webkitFullscreenElement||this.doc.msFullscreenElement)&&this.cancelFullScreen.call(this.doc)}}])&&Z(n.prototype,t),r&&Z(n,r),e}();function ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ne(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var te=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.owner=n,this.html=X.a,this.scores=new K,this.fullScreen=new $}var n,t,r;return n=e,(t=[{key:"updateChildren",value:function(e){var n=this;n.panel=e.querySelector("#settings"),n.closeX=e.querySelector("#settings .close-x"),n.labels={playerName:e.querySelector('label[for="playerName"]'),matrixcol:e.querySelector('label[for="matrixcol"]'),matrixrow:e.querySelector('label[for="matrixrow"]')},n.params={languageSelection:e.querySelector("#languageSelection"),playerName:e.querySelector("#playerName"),matrixcol:e.querySelector("#matrixcol"),matrixrow:e.querySelector("#matrixrow"),isFullScreen:e.querySelector("#isFullScreen")},n.vCheckFullScreen=e.querySelector("#isFullScreen + .vCheck"),n.applySettings=e.querySelector("#applySettings"),n.restartGame=e.querySelector("#restartGame"),n.closeX.addEventListener("click",function(){return n.hide()}),n.params.languageSelection.addEventListener("change",function(e){n.owner.setAttribute("lang",e.target.value)}),n.vCheckFullScreen.addEventListener("click",function(e){var t=n.params.isFullScreen;t.checked=!t.checked,n.enableApplyButton.call(n)}),n.applySettings.addEventListener("click",function(e){if(0!==n.params.playerName.value.replace(/\s/g,"").length){var t=n.params.matrixcol.value,r=n.params.matrixrow.value,i=Math.max(Math.min(t,10),2),o=Math.max(Math.min(r,10),2),a=n.params.isFullScreen.checked;n.scores.currentPlayer.name=n.params.playerName.value,n.owner.layers.toolbar.player.innerText=n.scores.currentPlayer.name,n.owner.setAttribute("matrix","".concat(i,"x").concat(o)),a?(n.fullScreen.enter(),n.owner.setAttribute("view","fullscreen")):n.fullScreen.exit(),n.hide()}else n.params.playerName.classList.add("error")}),n.restartGame.addEventListener("click",function(e){n.hide(),n.owner.reset(),n.owner.render()}),document.addEventListener("fullscreenchange",function(e){null===document.fullscreenElement&&n.owner.setAttribute("view","")}),Object.keys(n.params).forEach(function(e){var t=n.params[e];t.addEventListener("focus",function(){n.show()});var r=[];"text"===t.type?r.push("blur","keyup"):r.push("change"),r.forEach(function(e){t.addEventListener(e,n.enableApplyButton.bind(n))})})}},{key:"reset",value:function(e){var n=ee(e.matrix.split("x").filter(function(e){return"x"!==e}),2);this.params.matrixcol.value=n[0],this.params.matrixrow.value=n[1];var t=this.scores.currentPlayer.name;"no"===e.settings?this.owner.layers.toolbar.menu.className="hide":this.owner.layers.toolbar.menu.className="","fullscreen"===e.view?(this.params.isFullScreen.checked=!0,this.params.isFullScreen.setAttribute("checked","checked")):(this.params.isFullScreen.checked=!1,this.params.isFullScreen.removeAttribute("checked")),this.applySettings.setAttribute("disabled","disabled"),this.params.playerName.value=t,t&&t.length>0?this.owner.layers.toolbar.player.innerText=t:this.show()}},{key:"enableApplyButton",value:function(){this.applySettings.removeAttribute("disabled")}},{key:"show",value:function(){this.panel.classList.add("show")}},{key:"hide",value:function(){this.panel.classList.remove("show")}}])&&ne(n.prototype,t),r&&ne(n,r),e}(),re=t(4),ie=t.n(re);function oe(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.owner=n,this.html=ie.a}var n,t,r;return n=e,(t=[{key:"init",value:function(){this.owner.shadowRoot.querySelector("#nextlevel #continue").addEventListener("click",this.hide.bind(this))}},{key:"show",value:function(){var e,n,t,r=this.owner.shadowRoot.querySelector("#nextlevel");this.owner.shadowRoot.querySelector("#summary").innerHTML=(e=this.owner.settings.scores.currentPlayer.scores,n="",t=Object.keys(e).length,Object.keys(e).forEach(function(r,i){n+='<p style="font-size: '.concat(10-2*(t-i),"vh;\n    opacity:").concat((1/(t-i)).toFixed(2),'">').concat(r.slice(1)," ").concat(e[r][0].strDiff,"</p>")}),n),r.classList.add("active"),r.style.opacity="1"}},{key:"hide",value:function(){var e=this.owner.shadowRoot.querySelector("#nextlevel");e.style.opacity="0",setTimeout(function(){e.classList.remove("active")},300)}}])&&oe(n.prototype,t),r&&oe(n,r),e}();function se(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ce=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.owner=n,this.manifest={},this.images={},this.index={from:0,to:0,card:0}}var n,t,r;return n=e,(t=[{key:"getManifest",value:function(){var e=this;return fetch("./manifest.json").then(function(e){return e.json()}).then(function(n){return e.manifest=n,n}).catch(function(e){throw new Error(e)})}},{key:"getCardImages",value:function(e){var n=this;n.index.to=e.imageCount;var t=n.manifest.imageServer.list.replace(":from",n.index.from).replace(":to",n.index.to).replace(":cardId",n.index.card);return n.index.from=e.imageCount,n.index.card=n.index.card+1,fetch(t).then(function(e){return e.json()}).then(function(t){n.done(t,e)})}},{key:"done",value:function(e,n){var t=this;t.owner.cardBack.addEventListener("load",function(r){e.images.forEach(function(e){var r=document.createElement("img");r.src=t.manifest.imageServer.image.replace(":width",n.width).replace(":height",n.height).replace(":path",e),t.owner.game.addImage(r)})}),t.owner.cardBack.src=t.manifest.imageServer.image.replace(":width",n.width).replace(":height",n.height).replace(":path",e.cards[0])}}])&&se(n.prototype,t),r&&se(n,r),e}();function le(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ue(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var fe=function(){function e(n,t,r){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.min=n,this.max=t,this.matrix=r}var n,t,r;return n=e,(t=[{key:"defined",value:function(){var e=this.matrix;if(e.indexOf("x")<0)return!1;if(2!==e.split("x").length)return!1;var n=le(e.split("x"),2),t=n[0],r=n[1];return!isNaN(parseInt(t,10))&&!isNaN(parseInt(r,10))}},{key:"exceeded",value:function(){var e=this,n=!1;return this.matrix.split("x").forEach(function(t){(t<e.min||t>e.max)&&(n=!0)}),n}}])&&ue(n.prototype,t),r&&ue(n,r),e}();function de(e){var n=document.createElement("div"),t=document.createElement("canvas");return t.getContext("2d").save(),n.classList.add("tile"),t.setAttribute("index",e),n.appendChild(t),{tile:n,canvas:t}}function pe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e){var n="function"==typeof Map?new Map:void 0;return(ve=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,r)}function r(){return ge(e,arguments,we(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),be(r,e)})(e)}function ge(e,n,t){return(ge=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,n,t){var r=[null];r.push.apply(r,n);var i=new(Function.bind.apply(e,r));return t&&be(i,t.prototype),i}).apply(null,arguments)}function be(e,n){return(be=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe=["matrix","lang","view","settings"],ke=function(e){function n(){var e;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),e=function(e,n){return!n||"object"!==he(n)&&"function"!=typeof n?ye(e):n}(this,we(n).call(this));var t,r,i,o=ye(ye(e));return e.i18n=new l,e.fullScreen=new $,e.imageServer=new ce(ye(ye(e))),e.manifest,e.rendered=!1,e.images=[],e.tiles=[],window.addEventListener("resize",(t=function(){o.reset(),o.render()},r=500,function(){var e=this;clearTimeout(i),i=setTimeout(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(e,r)},r)})),e.toolbar=document.createElement("div"),e.settings=new te(ye(ye(e))),e.layers={loading:null},e.cardBack=document.createElement("img"),e}var t,r,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&be(e,n)}(n,ve(HTMLElement)),t=n,i=[{key:"observedAttributes",get:function(){return xe}}],(r=[{key:"reset",value:function(){this.rendered=!1,this.images=[],this.tiles=[],this.layers={loading:{},nextLevel:new ae(this)}}},{key:"connectedCallback",value:function(){this.rendered||this.render()}},{key:"disconnectedCallback",value:function(){}},{key:"adoptedCallback",value:function(){}},{key:"attributeChangedCallback",value:function(e,n,t){var r=this;switch(e){case"lang":this.i18n=new l(t),this.i18n.update(this.shadowRoot);break;case"view":"fullscreen"===t?this.fullScreen.enter():this.fullScreen.exit();break;case"matrix":r.reset(),r.rendered=!1,r.render()}}},{key:"checkDefaultAttributes",value:function(){var e=this.getAttribute("matrix"),n=new fe(2,10,e);return n.defined()&&!n.exceeded(e.split("x"))||(this.shadowRoot.innerHTML+="\n      ".concat(this.i18n.message("MATRIX_DIMENSIONS_ERROR"),"\n      ").concat(this.i18n.sample("MATRIX_DIMENSIONS_ERROR"),"\n      "),!1)}},{key:"prepareMatrix",value:function(){var e=this.getAttribute("matrix").split("x");e[0]=parseInt(e[0]),e[1]=parseInt(e[1]);var n=function(e){var n=pe(e,2),t=n[0],r=n[1];return t*r%2==1?(t*r-1)/2:-1}(e),t="width:".concat(100/e[0],"%;"),r="height:".concat(100/e[1],"%;"),i=e[0]*e[1],o=i%2==0?i/2:(i-1)/2,a=this;a.shadowRoot.innerHTML+="\n    <style>:host .tile {".concat(t+r,"}</style>");var s=0,c=0,l=0,u=document.createElement("div"),f="fullscreen"===a.getAttribute("view")?{w:document.documentElement.offsetWidth,h:document.documentElement.offsetHeight}:{w:a.parentNode.offsetWidth,h:a.parentNode.offsetHeight},d=parseInt(f.w/e[0]),p=parseInt(f.h/e[1]);for(u.id="tiles-container",a.shadowRoot.appendChild(u),s=0;s<e[0];s++)for(c=0;c<e[1];c++){var h=de(l=c+e[1]*s);u.appendChild(h.tile),l!==n&&(h.canvas.classList.add("wait"),a.tiles.push(h))}a.game=new z(this.tiles.map(function(e){return e.canvas}),this.cardBack),a.game.events.addEventListener("ready",function(e){a.shadowRoot.querySelector("#loading").classList.add("done"),a.game.counter.reset(a.shadowRoot.querySelector("#counter"))}),a.game.events.addEventListener("win",function(e){var n=a.myAttributes(),t=a.game.nextLevel(n);a.settings.scores.currentPlayer.addScore(n.matrix,a.game.counter),a.setAttribute("matrix",t)}),a.imageServer.getManifest().then(function(e){a.manifest=e,a.imageServer.getCardImages({width:d,height:p,imageCount:o}).catch(function(e){new q(a,{width:d,height:p,imageCount:o})})}).catch(function(e){new q(a,{width:d,height:p,imageCount:o})})}},{key:"myAttributes",value:function(){var e=this,n={};return xe.forEach(function(t){n[t]=e.getAttribute(t)}),n}},{key:"render",value:function(){var e=this;e.rendered||(e.i18n=new l(e.getAttribute("lang")),e.rendered=!0,e.shadowRoot||e.attachShadow({mode:"open"}),e.shadowRoot.innerHTML="<style>".concat(U.a,"</style>"),e.checkDefaultAttributes()?(e.shadowRoot.innerHTML="<style>".concat(U.a,"</style>\n    ").concat(H.a,"\n    ").concat(e.settings.html,"\n    ").concat(e.layers.nextLevel.html,'\n      <div id="loading">\n        <div class="lastScore">').concat(e.settings.scores.currentPlayer.lastGame,'</div>\n        <div class="goto next level">').concat(e.i18n.message("LOADING"),"</div>\n      </div>"),e.prepareMatrix(),e.i18n.update(e.shadowRoot),e.settings.updateChildren(e.shadowRoot),e.layers.toolbar={counter:this.shadowRoot.querySelector("#counter"),player:this.shadowRoot.querySelector("#player"),menu:this.shadowRoot.querySelector("#menu")},e.settings.reset(e.myAttributes()),e.layers.toolbar.menu.addEventListener("click",function(){e.settings.reset(e.myAttributes()),e.settings.show()}),e.layers.nextLevel.init(),e.layers.nextLevel.show()):e.i18n.update(e.shadowRoot))}}])&&me(t.prototype,r),i&&me(t,i),n}();customElements.define("mini-memory",ke)}]);